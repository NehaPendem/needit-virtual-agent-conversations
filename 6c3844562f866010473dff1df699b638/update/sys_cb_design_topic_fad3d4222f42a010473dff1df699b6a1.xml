<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">32d3d4222f42a010473dff1df699b69f</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"8e99a846ed4d4dd39cf9f30f024aa053","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"8e99a846ed4d4dd39cf9f30f024aa053"}],"goals":[{"name":"primary","trigger_id":"8e99a846ed4d4dd39cf9f30f024aa053","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\" I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"bda69159bda9413ab2aea264bd89e197","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"86297c260d62445b86ae6ad6eda833e6","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"da94fee09dba4d0aa1a30d4fcf8d34b4","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"f9e2a561bc9d425c9dd61937aca1cb70","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()"},"id":"89098ebc31fa442cacae5efa0789c677","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"86e3e0f64f4342b798857c2fe65f6ce8","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"0e3f5ab283414b3c839868b0a7b51391","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view."},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"0e3f5ab283414b3c839868b0a7b51391","fields":["priority","short_description","u_when_needed"],"id":"e2460c6f9c3a40b889e9a23e5399c7b1","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"InputPrompt","variable_id":"8f436e71b7944b6e92dd081a2e3f9f22","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"2d0f478229764185a62b217c612e7902","name":" Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"_search_again="},"id":"fce7468489624419a091ace19fde3e5e","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"_search_again=true"},"id":"ee57c7d6f1434abf8fdd627c0301974c","name":"Yes"}],"id":"da62be64b42d41698673cc6989b5bf94","goal_id":"primary"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"0e3f5ab283414b3c839868b0a7b51391","id":"b1eb15f2dd0b4d539253e4eaa9b9c99d","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"0e3f5ab283414b3c839868b0a7b51391","fields":["u_when_needed","short_description"],"id":"6b46539334d34f9e8c9c67e2c0261b65","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"c6f588aff0f44efb970f3fc75a9340ec","name":"What to Update","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"a9c286f0337e46edbe425c8106402147","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What field to update?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"When Needed ","expression":{"type":"Applicability","mode":"query","value":"what_to_update=when needed"},"id":"71735b8b4ae1407ead668eea3f95bba6","name":"When Needed "},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=short description"},"id":"0637e0b4c2214e35818425c295079b58","name":"Short Description"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"546f8c90bb884a43bb70329168d2c3f5","name":"Nothing"}],"id":"341a9bb9de1946c0b4ff16bae7b7a390","goal_id":"primary"},{"type":"InputPrompt","variable_id":"64d5c6c523374413ac7925e37dc1bb03","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"de360dd5dcb0428aae1ea53cdf512d76","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"17edfe7877d5459f9f33af407d424a68","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Enter the new short description\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"81be37aebb9f470db5ad2ff904033bdb","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"0e3f5ab283414b3c839868b0a7b51391","id":"b9dbd9c829884772ad14f489558c6589","name":"Change short description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()","id":"09e85f6090b34452b732b0223287a029","name":" Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"}},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"query","value":""},"id":"f35279d16b9e435ca777adcc11250d76","name":"Less than 3"},{"type":"Branch","label":"Greater than 3","expression":{"type":"Applicability","mode":"query","value":""},"id":"66eab1b940ba433b8b70f45a603ca64f","name":"Greater than 3"}],"id":"50e0eaa452ef40358736a23b0e240b93","goal_id":"primary"}],"edges":[{"type":"Edge","source_node_id":"c6f588aff0f44efb970f3fc75a9340ec","target_node_id":"341a9bb9de1946c0b4ff16bae7b7a390","id":"4ee8883786724ebdbf972c499a9d143f"},{"type":"Edge","source_node_id":"bda69159bda9413ab2aea264bd89e197","target_node_id":"da94fee09dba4d0aa1a30d4fcf8d34b4","id":"36a5d0834dff4a409266a76b03cf4f71"},{"type":"Edge","source_node_id":"da94fee09dba4d0aa1a30d4fcf8d34b4","target_node_id":"89098ebc31fa442cacae5efa0789c677","id":"de99fe24d9a34364b9255a583f596b97"},{"type":"Edge","source_node_id":"89098ebc31fa442cacae5efa0789c677","target_node_id":"86e3e0f64f4342b798857c2fe65f6ce8","id":"379d36cfa6d24203a257e2ca3a6af720"},{"type":"Edge","source_node_id":"86e3e0f64f4342b798857c2fe65f6ce8","target_node_id":"e2460c6f9c3a40b889e9a23e5399c7b1","id":"fac20b8781064326ae93e94436505828"},{"type":"Edge","source_node_id":"2d0f478229764185a62b217c612e7902","target_node_id":"da62be64b42d41698673cc6989b5bf94","id":"9f011cec16234686964ff3102b3beace"},{"type":"Edge","source_node_id":"da62be64b42d41698673cc6989b5bf94","target_node_id":"86297c260d62445b86ae6ad6eda833e6","branch_id":"fce7468489624419a091ace19fde3e5e","id":"4c6b646d728648b980ad1ee1e6542f88","name":"fce7468489624419a091ace19fde3e5e"},{"type":"Edge","source_node_id":"b1eb15f2dd0b4d539253e4eaa9b9c99d","target_node_id":"6b46539334d34f9e8c9c67e2c0261b65","id":"92bb390437844725a6e15d694ec1d469"},{"type":"Edge","source_node_id":"6b46539334d34f9e8c9c67e2c0261b65","target_node_id":"2d0f478229764185a62b217c612e7902","id":"2b68b86534fb4dc19a9216412116b799"},{"type":"Edge","source_node_id":"e2460c6f9c3a40b889e9a23e5399c7b1","target_node_id":"c6f588aff0f44efb970f3fc75a9340ec","id":"1f94624929e249b6af75406e76be81fe"},{"type":"Edge","source_node_id":"341a9bb9de1946c0b4ff16bae7b7a390","target_node_id":"de360dd5dcb0428aae1ea53cdf512d76","branch_id":"71735b8b4ae1407ead668eea3f95bba6","id":"71722aa6f65b4f4c84db36149b09ffc5","name":"71735b8b4ae1407ead668eea3f95bba6"},{"type":"Edge","source_node_id":"de360dd5dcb0428aae1ea53cdf512d76","target_node_id":"b1eb15f2dd0b4d539253e4eaa9b9c99d","id":"49d600e5704849e382bf0f24751ba620"},{"type":"Edge","source_node_id":"341a9bb9de1946c0b4ff16bae7b7a390","target_node_id":"81be37aebb9f470db5ad2ff904033bdb","branch_id":"0637e0b4c2214e35818425c295079b58","id":"b672b4ef9438432a92124b83e45426f5","name":"0637e0b4c2214e35818425c295079b58"},{"type":"Edge","source_node_id":"81be37aebb9f470db5ad2ff904033bdb","target_node_id":"b9dbd9c829884772ad14f489558c6589","id":"8180171c506644f290bec648275cb3c8"},{"type":"Edge","source_node_id":"b9dbd9c829884772ad14f489558c6589","target_node_id":"6b46539334d34f9e8c9c67e2c0261b65","id":"da3cda652a22485eb4fbcca431e3ec48"},{"type":"Edge","source_node_id":"341a9bb9de1946c0b4ff16bae7b7a390","target_node_id":"2d0f478229764185a62b217c612e7902","branch_id":"546f8c90bb884a43bb70329168d2c3f5","id":"9f8e805d7a6443b58785594c4fd5f58d","name":"546f8c90bb884a43bb70329168d2c3f5"},{"type":"Edge","source_node_id":"da62be64b42d41698673cc6989b5bf94","target_node_id":"09e85f6090b34452b732b0223287a029","branch_id":"ee57c7d6f1434abf8fdd627c0301974c","id":"fd173cd6a91d43628e39723b2f9e5fd8","name":"ee57c7d6f1434abf8fdd627c0301974c"},{"type":"Edge","source_node_id":"09e85f6090b34452b732b0223287a029","target_node_id":"50e0eaa452ef40358736a23b0e240b93","id":"9cee2304143b4bed857e128ca1259097"},{"type":"Edge","source_node_id":"50e0eaa452ef40358736a23b0e240b93","target_node_id":"da94fee09dba4d0aa1a30d4fcf8d34b4","branch_id":"f35279d16b9e435ca777adcc11250d76","id":"843c9745e5ff46d29323b6b261d92153","name":"f35279d16b9e435ca777adcc11250d76"},{"type":"Edge","source_node_id":"50e0eaa452ef40358736a23b0e240b93","target_node_id":"86297c260d62445b86ae6ad6eda833e6","branch_id":"66eab1b940ba433b8b70f45a603ca64f","id":"15511bdce0254eac8f2214f986e5b2e6","name":"66eab1b940ba433b8b70f45a603ca64f"}],"id":"primary"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"c3325b3c79a24436b25241050f3bb1db","formatType":"text"}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text"},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"human resources"}],"id":"f9e2a561bc9d425c9dd61937aca1cb70","name":"needit_type","formatType":"text"},{"type":"Reference","table":"x_58872_needit_needit","id":"0e3f5ab283414b3c839868b0a7b51391","name":"needit_list","formatType":"text"},{"type":"True/False","id":"8f436e71b7944b6e92dd081a2e3f9f22","name":"_search_again","formatType":"text"},{"type":"Date/Time","mode":"date","id":"64d5c6c523374413ac7925e37dc1bb03","name":"new_when_needed_date","formatType":"text"},{"type":"Reference","table":"","id":"223b93c19782482291002ddc43a5e4e4","name":"change_when_needed_date","formatType":"text"},{"type":"Choice","choices":[{"name":"When Needed","element":"when needed"},{"name":"Short Description","element":"short description"},{"name":"Nothing","element":"nothing"}],"id":"a9c286f0337e46edbe425c8106402147","name":"what_to_update","formatType":"text"},{"type":"String","name":"new_short_description","id":"17edfe7877d5459f9f33af407d424a68","formatType":"Text","validationScript":""},{"type":"Reference","table":"x_58872_needit_needit","id":"335a7e3234214709aa9c2a8d97219943","name":"change_short_description","formatType":"text"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"6c3844562f866010473dff1df699b638","domain":"global","topic_type":"STANDARD","channels":[],"id":"14e13f1a2fce6010473dff1df699b6ef","name":"_PRVW__eed3d4220842a010f5ff0476bf9cb79d","key_phrases":["Update NeedIt Records","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_category":"1968c4562f866010473dff1df699b6b1","library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>14e13f1a2fce6010473dff1df699b6ef</design_topic_id>
        <name>_PRVW__eed3d4220842a010f5ff0476bf9cb79d</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-02-03 09:17:54</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>fad3d4222f42a010473dff1df699b6a1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_571380_needit_vi">6c3844562f866010473dff1df699b638</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">6c3844562f866010473dff1df699b638</sys_scope>
        <sys_update_name>sys_cb_design_topic_fad3d4222f42a010473dff1df699b6a1</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-02-03 09:17:54</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
